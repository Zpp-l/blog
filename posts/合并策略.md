---
image: 'https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/591ff8a99b904883a237e5bd96b4fa2e~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?'
title: '合并策略'
excerpt: '合并策略'
---

**默认合并策略**

```js
function defaultStrat(val1: any, val2: any): any {
  return typeof val2 !== 'undefined' ? val2 : val1
}
```

如果有 `val2`​ 则返回 `val2`​，否则返回 `val1`​，也就是如果自定义配置中定义了某个属性，就采用自定义的，否则就用默认配置

‍

**仅接受自定义配置合并策略**

```ts
function fromVal2Strat(val1: any, val2: any): any {
  if (typeof val2 !== 'undefined') {
    return val2
  }
}

const stratKeysFromVal2 = ['url', 'params', 'data']

stratKeysFromVal2.forEach(key => {
  strats[key] = fromVal2Strat
})
```

‍

**复杂对象，深拷贝**

‍

**拍平**

​`headers.common.xxx`​ ---- `headers.xxx`​
