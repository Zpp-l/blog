> 监听鼠标在某个容器中移动的坐标，可以是相对于整个页面的坐标，也可以是相对于画布上的偏移

**useMouse 获取鼠标的位移值**

```ts
export function useMouse(target: HTMLElement | Window, callback?:(x:number,y:number)=>void){

    const x = ref(0)
    const y = ref(0)
    useEventListener(target, 'mousemove', (event)=>{
        const {pageX,pageY} = event
        x.value = pageX
        y.value = pageY
        callback && callback(pageX, pageY)
    })
}
```

**useEventListener 事件中转站**

```ts
const useEventListener = (
  target: HTMLElement | Window,
  event: keyof HTMLElementEventMap,
  callback: (this: HTMLElement, ev: any) => any
) => {
  onMounted(() => target.addEventListener(event, throttle(callback, 100)));
  onUnmounted(() => target.removeEventListener(event, callback));
};

```

使用throttle进行节流， 首尾节流

```ts
function throttle(fn: Function, delay: number) {
  let pre = 0;
  let timer: any = null;
  return function (...args: any) {
    let now = new Date().getTime();
    let reming = delay - (now - pre);
    clearTimeout(timer);
    if (reming < 0) {
      fn(...args);
      pre = now;
    } else {
      timer = setTimeout(() => {
        fn(...args);
      }, reming);
    }
  };
}
```

‍
